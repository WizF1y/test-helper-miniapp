<wxs module="utils">
  var isSelected = function(selectedMonths, month) {
    for (var i = 0; i < selectedMonths.length; i++) {
      if (selectedMonths[i] == month) {
        return true;
      }
    }
    return false;
  };
  module.exports.isSelected = isSelected;
</wxs>

<view class="container">
  <!-- 页面标题 -->
  <view class="header">
    <text class="title">随机练习设置</text>
  </view>

  <!-- 月份选择 -->
  <view class="section card">
    <view class="section-title">选择月份范围</view>
    <view class="section-desc">选择要练习的题目月份</view>
    
    <!-- 实时显示选中状态 -->
    <view style="padding: 10rpx; background: #e6f0ff; margin: 10rpx 0; font-size: 24rpx; color: #3A7FED;">
      当前选中: {{selectedMonths.length > 0 ? selectedMonths : '未选择'}}
    </view>
    
    <view class="month-grid">
      <view class="month-item {{utils.isSelected(selectedMonths, item) ? 'active' : ''}}"
            wx:for="{{months}}"
            wx:for-item="item"
            wx:key="item"
            data-month="{{item}}"
            bindtap="toggleMonth">
        <text>{{item}}月</text>
      </view>
    </view>
  </view>

  <!-- 题目数量选择 -->
  <view class="section card">
    <view class="section-title">题目数量</view>
    <view class="section-desc">选择本次练习的题目数量</view>
    
    <view class="count-grid">
      <view class="count-item {{questionCount === item ? 'active' : ''}}"
            wx:for="{{questionCounts}}"
            wx:for-item="item"
            wx:key="item"
            data-count="{{item}}"
            bindtap="selectQuestionCount">
        <text>{{item}}题</text>
      </view>
    </view>
  </view>

  <!-- 开始按钮 -->
  <view class="start-container">
    <button class="start-btn" bindtap="startPractice">开始练习</button>
  </view>
</view>