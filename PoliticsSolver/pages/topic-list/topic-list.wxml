<view class="container">
  <!-- 未登录提示 -->
  <view class="login-prompt" wx:if="{{!userId}}">
    <view class="prompt-content">
      <image src="/assets/icons/profile.png" class="prompt-icon"></image>
      <text class="prompt-text">请登录后使用完整功能</text>
      <button class="login-btn" bindtap="navigateToProfile">前往登录</button>
    </view>
  </view>

  <!-- 题目列表 -->
  <view wx:if="{{userId && topicList.length > 0}}">
    <!-- 顶部标题 -->
    <view class="header">
      <text class="title">{{type === 'month' ? value + '月题库' : value + '地区题库'}}</text>
      <text class="count">共{{topicList.length}}题</text>
    </view>
    
    <view class="topic-list">
      <view wx:for="{{topicList}}" wx:key="id" class="topic-item" data-index="{{index}}">
        <topic-card 
          topic="{{item}}" 
          index="{{index}}" 
          showActions="{{true}}"
          hasNext="{{index < topicList.length-1}}"
          needSubmit="{{false}}"
          showAnswer="{{item.isAnswered}}"
          __debug__="{{false}}"
          bind:select="onTopicSelect"
          bind:favorite="onTopicFavorite"
          bind:addMistake="onAddMistake">
        </topic-card>
      </view>
    </view>
    
    <!-- 加载更多提示 -->
    <view class="load-more">
      <view wx:if="{{hasMore}}" class="loading">正在加载更多...</view>
      <view wx:else class="no-more">已经到底啦~</view>
    </view>
  </view>

  <!-- 空状态 -->
  <view wx:elif="{{userId && topicList.length === 0}}" class="empty-container">
    <empty title="暂无题目" description="当前分类下暂无题目"></empty>
  </view>
</view>